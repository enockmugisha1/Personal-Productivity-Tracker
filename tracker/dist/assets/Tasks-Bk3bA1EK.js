import{r as a,u as j,j as e,h as w,a as d,V as o,k as F,m as C}from"./index-hdv4Cp5W.js";import{u as S}from"./dataStore-ZRTxskou.js";function I(){const[x,m]=a.useState([]),[i,N]=a.useState({title:"",description:"",dueDate:""}),[k,b]=a.useState(!1),{user:l}=j(),h=S(r=>r.fetchStats),u=async()=>{if(!l){m([]);return}try{const r=await d.get("/api/tasks");m(r.data)}catch{o.error("Failed to fetch tasks"),m([])}};a.useEffect(()=>{u()},[l]);const g=a.useCallback(r=>{const{name:t,value:n}=r.target;N(c=>({...c,[t]:n}))},[]),v=async(r,t)=>{if(l)try{await d.patch(`/api/tasks/${r}`,{completed:!t}),u(),h(),o.success("Task status updated")}catch{o.error("Failed to update task")}},T=async r=>{if(l&&window.confirm("Are you sure you want to delete this task?"))try{await d.delete(`/api/tasks/${r}`),u(),h(),o.success("Task deleted")}catch{o.error("Failed to delete task")}},P=()=>{const[r,t]=a.useState(""),[n,c]=a.useState(""),[s,f]=a.useState(!1),E=async V=>{V.preventDefault();const y=i.title.trim();if(y.length<2){t("Title must be at least 2 characters."),c("");return}if(!l){t("You must be logged in to create a task.");return}t(""),f(!0);try{const p=await d.post("/api/tasks",{...i,title:y});N({title:"",description:"",dueDate:""}),b(!1),c("Task added successfully!"),await u(),h(),o.success("Task created successfully"),setTimeout(()=>c(""),2e3)}catch(p){console.error("Error creating task:",p),t("Failed to create task. Please try again."),o.error("Failed to create task")}finally{f(!1)}};return e.jsxDEV("form",{onSubmit:E,className:"card dark:bg-gray-800 space-y-6 mb-6 transition-all duration-200","aria-label":"Add New Task",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Task"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:153,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Title ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:157,columnNumber:19},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:156,columnNumber:11},this),e.jsxDEV("input",{type:"text",id:"title",name:"title",required:!0,className:`w-full px-4 py-3 rounded-lg border text-gray-900 dark:text-white bg-white dark:bg-gray-700 placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 ${r?"border-red-500 ring-1 ring-red-500":"border-gray-300 dark:border-gray-600"} ${s?"opacity-50 cursor-not-allowed":""}`,value:i.title,onChange:g,autoFocus:!0,"aria-required":"true","aria-invalid":!!r,"aria-describedby":r?"task-title-error":void 0,placeholder:"Enter task title...",disabled:s},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:159,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:155,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:177,columnNumber:11},this),e.jsxDEV("textarea",{id:"description",name:"description",rows:3,className:`w-full px-4 py-3 rounded-lg border text-gray-900 dark:text-white bg-white dark:bg-gray-700 placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 border-gray-300 dark:border-gray-600 resize-vertical ${s?"opacity-50 cursor-not-allowed":""}`,value:i.description,onChange:g,placeholder:"Describe your task...",disabled:s},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:180,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:176,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:193,columnNumber:11},this),e.jsxDEV("input",{type:"date",id:"dueDate",name:"dueDate",className:`w-full px-4 py-3 rounded-lg border text-gray-900 dark:text-white bg-white dark:bg-gray-700 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 border-gray-300 dark:border-gray-600 ${s?"opacity-50 cursor-not-allowed":""}`,value:i.dueDate,onChange:g,disabled:s},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:196,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:192,columnNumber:9},this),e.jsxDEV("div",{"aria-live":"polite",className:"min-h-[24px]",children:[r&&e.jsxDEV("div",{id:"task-title-error",className:"text-red-500 text-sm font-medium mt-1 animate-pulse",children:r},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:209,columnNumber:13},this),n&&e.jsxDEV("div",{className:"text-green-500 text-sm font-medium mt-1 animate-fade-in",children:n},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:207,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>{b(!1),t(""),c("")},className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:"Cancel"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:217,columnNumber:11},this),e.jsxDEV("button",{type:"submit",className:`px-6 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center ${i.title.trim().length<2||s?"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"}`,disabled:i.title.trim().length<2||s,children:[s&&e.jsxDEV("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:236,columnNumber:17},this),e.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:237,columnNumber:17},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:235,columnNumber:15},this),s?"Adding Task...":"Add Task"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:229,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:216,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:152,columnNumber:9},this)},D=({task:r})=>e.jsxDEV("li",{className:"card dark:bg-gray-800 flex items-start space-x-4",children:[e.jsxDEV("input",{type:"checkbox",checked:r.completed,onChange:()=>v(r._id,r.completed),className:"h-6 w-6 text-blue-500 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 mt-1"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:249,columnNumber:7},this),e.jsxDEV("div",{className:"flex-grow",children:[e.jsxDEV("p",{className:`font-medium ${r.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:r.title},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:256,columnNumber:9},this),r.description&&e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:r.description},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:261,columnNumber:11},this),r.dueDate&&e.jsxDEV("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mt-2",children:[e.jsxDEV(F,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:265,columnNumber:13},this),e.jsxDEV("span",{children:["Due: ",new Date(r.dueDate).toLocaleDateString()]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:266,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:264,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:255,columnNumber:7},this),e.jsxDEV("button",{onClick:()=>T(r._id),className:"p-2 text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete task",children:e.jsxDEV(C,{},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:275,columnNumber:9},this)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:270,columnNumber:7},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:248,columnNumber:5},this);return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Tasks"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:283,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>b(!k),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",children:[e.jsxDEV(w,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:288,columnNumber:11},this),k?"Close Form":"Add Task"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:284,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:282,columnNumber:7},this),k&&e.jsxDEV(P,{},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:293,columnNumber:25},this),e.jsxDEV("ul",{className:"space-y-4",children:x.length>0?x.map(r=>e.jsxDEV(D,{task:r},r._id,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:297,columnNumber:31},this)):e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No tasks yet"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:300,columnNumber:13},this),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:'Click "Add Task" to get started.'},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:301,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:299,columnNumber:11},this)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:295,columnNumber:7},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Tasks.tsx",lineNumber:281,columnNumber:5},this)}export{I as default};
