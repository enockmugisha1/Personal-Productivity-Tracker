import{r as a,u as A,j as e,h as P,n as H,a as b,V as s,F as I,o as f,m as L,k as $}from"./index-hdv4Cp5W.js";import{u as M}from"./dataStore-ZRTxskou.js";function Y(){const[x,N]=a.useState([]),[o,y]=a.useState({name:"",description:"",frequency:"daily"}),[n,u]=a.useState(!1),[D,g]=a.useState(!1),{user:c}=A(),h=M(r=>r.fetchStats),d=async()=>{if(!c){N([]);return}try{g(!0);const r=await b.get("/api/habits");N(r.data)}catch{s.error("Failed to fetch habits"),N([])}finally{g(!1)}};a.useEffect(()=>{c&&d()},[c]);const k=a.useCallback(r=>{const{name:t,value:i}=r.target;y(m=>({...m,[t]:i}))},[]),T=async r=>{if(r.preventDefault(),!c){s.error("You must be logged in.");return}try{await b.post("/api/habits",o),y({name:"",description:"",frequency:"daily"}),u(!1),s.success("Habit created successfully"),d(),h()}catch{s.error("Failed to create habit")}},j=async r=>{if(c)try{await b.post(`/api/habits/${r}/complete`),d(),h(),s.success("Habit marked as complete!")}catch{s.error("Failed to complete habit")}},E=async r=>{if(c&&window.confirm("Are you sure you want to delete this habit? This cannot be undone."))try{await b.delete(`/api/habits/${r}`),d(),h(),s.success("Habit deleted")}catch{s.error("Failed to delete habit")}},V=r=>r>=7?"ðŸ”¥":r>=3?"âš¡":r>=1?"âœ¨":"ðŸ’ª",w=r=>{switch(r){case"daily":return"Daily";case"weekly":return"Weekly";case"monthly":return"Monthly";default:return r}},F=r=>{if(!r)return!1;const t=new Date().toISOString().split("T")[0];return new Date(r).toISOString().split("T")[0]===t},C=()=>{const[r,t]=a.useState(""),[i,m]=a.useState(""),[l,v]=a.useState(!1),q=async p=>{if(p.preventDefault(),o.name.trim().length<2){t("Habit name must be at least 2 characters."),m("");return}t(""),v(!0);try{await T(p),m("Habit added successfully!"),setTimeout(()=>m(""),2e3)}catch{t("Failed to create habit. Please try again.")}finally{v(!1)}};return e.jsxDEV("form",{onSubmit:q,className:"card dark:bg-gray-800 space-y-4 mb-6","aria-label":"Add New Habit",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Habit"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:157,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Habit Name ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:161,columnNumber:24},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:160,columnNumber:11},this),e.jsxDEV("input",{type:"text",id:"name",name:"name",required:!0,className:`input focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 ${r?"border-red-500":""}`,value:o.name,onChange:k,autoFocus:!0,"aria-required":"true","aria-invalid":!!r,"aria-describedby":r?"habit-name-error":void 0,placeholder:"e.g., Exercise, Read, Meditate...",disabled:l},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:163,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:159,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:181,columnNumber:11},this),e.jsxDEV("textarea",{id:"description",name:"description",rows:3,className:"input focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400",value:o.description,onChange:k,placeholder:"Describe your habit and why it's important...",disabled:l},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:184,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:180,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"frequency",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frequency"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV("select",{id:"frequency",name:"frequency",className:"input focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400",value:o.frequency,onChange:k,disabled:l,children:[e.jsxDEV("option",{value:"daily",children:"Daily"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:208,columnNumber:13},this),e.jsxDEV("option",{value:"weekly",children:"Weekly"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("option",{value:"monthly",children:"Monthly"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:210,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:200,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:196,columnNumber:9},this),e.jsxDEV("div",{"aria-live":"polite",className:"min-h-[24px]",children:[r&&e.jsxDEV("div",{id:"habit-name-error",className:"text-red-500 text-sm font-medium mt-1 animate-pulse",children:r},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:216,columnNumber:13},this),i&&e.jsxDEV("div",{className:"text-green-500 text-sm font-medium mt-1 animate-fade-in",children:i},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:214,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-end space-x-3",children:[e.jsxDEV("button",{type:"button",onClick:()=>u(!1),className:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 text-sm font-medium rounded-md shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 dark:focus:ring-offset-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l,children:"Cancel"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:224,columnNumber:11},this),e.jsxDEV("button",{type:"submit",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o.name.trim().length<2||l,children:l?"Adding...":"Add Habit"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:232,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:223,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:156,columnNumber:7},this)},S=({habit:r})=>{const t=F(r.lastCompleted),i=r.lastCompleted?new Date(r.lastCompleted).toLocaleDateString():"Never";return e.jsxDEV("div",{className:"card dark:bg-gray-800 space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{className:"flex-grow",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsxDEV(I,{className:"mr-2 text-primary-500"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:253,columnNumber:15},this),r.name]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:252,columnNumber:13},this),r.description&&e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:r.description},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:257,columnNumber:15},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:251,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-2xl",children:V(r.streak)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:262,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm font-semibold text-yellow-500 flex items-center",children:[e.jsxDEV(f,{className:"mr-1"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:264,columnNumber:17},this)," ",r.streak]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:263,columnNumber:15},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:261,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>E(r._id),className:"p-2 text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete habit",children:e.jsxDEV(L,{},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:272,columnNumber:15},this)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:267,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:260,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:250,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxDEV("span",{className:"flex items-center",children:[e.jsxDEV(H,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:279,columnNumber:13},this),w(r.frequency)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:278,columnNumber:11},this),e.jsxDEV("span",{className:"flex items-center",children:[e.jsxDEV($,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:283,columnNumber:13},this),"Last: ",i]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:282,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:277,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("button",{onClick:()=>j(r._id),className:`inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${t?"bg-gray-200 text-gray-700 hover:bg-gray-300 focus:ring-gray-500 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500":"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500"}`,disabled:t,children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:300,columnNumber:17},this),"Completed Today!"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:299,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:305,columnNumber:17},this),"Complete Today"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:289,columnNumber:11},this)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:288,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:249,columnNumber:7},this)};return D?e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Habits"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:319,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>u(!n),className:"btn btn-primary flex items-center",children:[e.jsxDEV(P,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:324,columnNumber:13},this),n?"Close Form":"Add Habit"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:320,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:318,columnNumber:9},this),e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:329,columnNumber:11},this),e.jsxDEV("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading habits..."},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:330,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:328,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:317,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Habits"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:339,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>u(!n),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200",children:[e.jsxDEV(P,{className:"mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:344,columnNumber:11},this),n?"Close Form":"Add Habit"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:340,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:338,columnNumber:7},this),n&&e.jsxDEV(C,{},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:349,columnNumber:25},this),e.jsxDEV("div",{className:"grid gap-6 sm:grid-cols-1 lg:grid-cols-2",children:x.length>0?x.map(r=>e.jsxDEV(S,{habit:r},r._id,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:353,columnNumber:33},this)):e.jsxDEV("div",{className:"text-center py-12 col-span-full",children:[e.jsxDEV(H,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:356,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mt-2",children:"No habits yet"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:357,columnNumber:13},this),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Start building positive habits to improve your productivity!"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:358,columnNumber:13},this),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-400 dark:text-gray-500",children:'Click "Add Habit" to get started.'},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:361,columnNumber:13},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:355,columnNumber:11},this)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:351,columnNumber:7},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Habits.tsx",lineNumber:337,columnNumber:5},this)}export{Y as default};
