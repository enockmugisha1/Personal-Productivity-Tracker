import{p as R,q as ne,r as o,u as ie,V as p,a as I,j as e,R as Q,h as ce,l as Z,m as le,b as X,s as ue,c as me,d as de,e as Y,t as Ne,v as fe}from"./index-hdv4Cp5W.js";import{u as ke}from"./dataStore-ZRTxskou.js";var B,U;function be(){if(U)return B;U=1;var a="Expected a function",k=NaN,y="[object Symbol]",b=/^\s+|\s+$/g,F=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,i=/^0o[0-7]+$/i,V=parseInt,d=typeof R=="object"&&R&&R.Object===Object&&R,M=typeof self=="object"&&self&&self.Object===Object&&self,l=d||M||Function("return this")(),w=Object.prototype,m=w.toString,j=Math.max,x=Math.min,D=function(){return l.Date.now()};function P(r,c,t){var n,v,g,S,f,E,O=0,K=!1,s=!1,N=!0;if(typeof r!="function")throw new TypeError(a);c=T(c)||0,L(t)&&(K=!!t.leading,s="maxWait"in t,g=s?j(T(t.maxWait)||0,c):g,N="trailing"in t?!!t.trailing:N);function q(u){var C=n,_=v;return n=v=void 0,O=u,S=r.apply(_,C),S}function te(u){return O=u,f=setTimeout(z,c),K?q(u):S}function se(u){var C=u-E,_=u-O,H=c-C;return s?x(H,g-_):H}function J(u){var C=u-E,_=u-O;return E===void 0||C>=c||C<0||s&&_>=g}function z(){var u=D();if(J(u))return G(u);f=setTimeout(z,se(u))}function G(u){return f=void 0,N&&n?q(u):(n=v=void 0,S)}function ae(){f!==void 0&&clearTimeout(f),O=0,n=E=v=f=void 0}function oe(){return f===void 0?S:G(D())}function W(){var u=D(),C=J(u);if(n=arguments,v=this,E=u,C){if(f===void 0)return te(E);if(s)return f=setTimeout(z,c),q(E)}return f===void 0&&(f=setTimeout(z,c)),S}return W.cancel=ae,W.flush=oe,W}function L(r){var c=typeof r;return!!r&&(c=="object"||c=="function")}function A(r){return!!r&&typeof r=="object"}function $(r){return typeof r=="symbol"||A(r)&&m.call(r)==y}function T(r){if(typeof r=="number")return r;if($(r))return k;if(L(r)){var c=typeof r.valueOf=="function"?r.valueOf():r;r=L(c)?c+"":c}if(typeof r!="string")return r===0?r:+r;r=r.replace(b,"");var t=h.test(r);return t||i.test(r)?V(r.slice(2),t?2:8):F.test(r)?k:+r}return B=P,B}var he=be();const xe=ne(he),ee=Q.memo(({noteInEditor:a,editingNote:k,isLoading:y,onInputChange:b,onSubmit:F,onCancel:h,isExpanded:i=!1,onToggleExpand:V})=>{const[d,M]=o.useState({}),[l,w]=o.useState(!1),[m,j]=o.useState(""),[x,D]=o.useState(!1),[P,L]=o.useState(0),[A,$]=o.useState(0),[T,r]=o.useState(!1),[c,t]=o.useState([]),[n,v]=o.useState("");o.useEffect(()=>{const s=a.content.trim().split(/\s+/).filter(N=>N.length>0);L(s.length),$(a.content.length)},[a.content]),o.useEffect(()=>{if(m){const s=setTimeout(()=>j(""),3e3);return()=>clearTimeout(s)}},[m]),o.useEffect(()=>{if(a.category){const s=a.category.split(",").map(N=>N.trim()).filter(N=>N.length>0);t(s)}else t([])},[a.category]);const g=()=>{const s={};return a.title.trim()?a.title.trim().length<3?s.title="Title must be at least 3 characters long":a.title.trim().length>100&&(s.title="Title must be less than 100 characters"):s.title="Title is required",a.content.trim()?a.content.trim().length<10?s.content="Content must be at least 10 characters long":a.content.trim().length>1e4&&(s.content="Content must be less than 10,000 characters"):s.content="Content is required",M(s),Object.keys(s).length===0},S=async s=>{if(s.preventDefault(),!g()){p.error("Please fix the errors before saving.");return}w(!0),M({});try{await F(s),j(k?"Note updated successfully!":"Note created successfully!"),D(!1)}catch{p.error("Failed to save note. Please try again.")}finally{w(!1)}},f=()=>{if(n.trim()&&!c.includes(n.trim())){const s=[...c,n.trim()];t(s),b({target:{name:"category",value:s.join(", ")}}),v("")}},E=s=>{const N=c.filter(q=>q!==s);t(N),b({target:{name:"category",value:N.join(", ")}})},O=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),f())},K=i?"fixed inset-0 z-50 overflow-auto bg-white dark:bg-gray-900 p-4":"form-container";return e.jsxDEV("div",{className:K,children:e.jsxDEV("div",{className:`${i?"max-w-6xl mx-auto":""} bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden`,children:[e.jsxDEV("div",{className:"px-6 py-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Z,{className:"h-6 w-6"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:140,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-xl font-semibold",children:k?"Edit Note":"Create New Note"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:142,columnNumber:15},void 0),x&&e.jsxDEV("p",{className:"text-primary-100 text-sm flex items-center mt-1",children:[e.jsxDEV(X,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:147,columnNumber:19},void 0),"Draft auto-saved"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:146,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:141,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:139,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>r(!T),className:"p-2 rounded-lg bg-primary-600 hover:bg-primary-700 transition-colors",title:T?"Hide Preview":"Show Preview",children:e.jsxDEV(ue,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:160,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:154,columnNumber:13},void 0),V&&e.jsxDEV("button",{type:"button",onClick:V,className:"p-2 rounded-lg bg-primary-600 hover:bg-primary-700 transition-colors",title:i?"Minimize":"Expand",children:i?e.jsxDEV(me,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:169,columnNumber:31},void 0):e.jsxDEV(de,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:169,columnNumber:69},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:163,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:h,className:"p-2 rounded-lg bg-red-500 hover:bg-red-600 transition-colors",title:"Close",children:e.jsxDEV(Y,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:178,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:172,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:138,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:S,className:`${i?"p-8":"p-6"} space-y-6`,children:[m&&e.jsxDEV("div",{className:"status-success p-4 rounded-lg flex items-center space-x-2 fade-in",children:[e.jsxDEV(Ne,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:187,columnNumber:15},void 0),e.jsxDEV("p",{className:"font-medium",children:m},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:188,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:186,columnNumber:13},void 0),e.jsxDEV("div",{className:i?"form-grid":"space-y-6",children:[e.jsxDEV("div",{className:i?"form-field":"form-field-full",children:[e.jsxDEV("label",{htmlFor:"title",className:"form-label form-label-required",children:"Title"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:196,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",id:"title",name:"title",value:a.title,onChange:b,className:`${d.title?"input-error":"input"} ${i?"input-lg":""}`,placeholder:"Enter a descriptive title for your note...","aria-required":"true","aria-invalid":d.title?"true":"false","aria-describedby":d.title?"title-error":"title-help",autoFocus:!0,maxLength:100},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:199,columnNumber:15},void 0),d.title?e.jsxDEV("p",{id:"title-error",className:"form-error",children:d.title},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:214,columnNumber:17},void 0):e.jsxDEV("p",{id:"title-help",className:"form-help",children:[a.title.length,"/100 characters"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:216,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:195,columnNumber:13},void 0),e.jsxDEV("div",{className:i?"form-field":"form-field-full",children:[e.jsxDEV("label",{htmlFor:"tags",className:"form-label",children:"Tags"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:224,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:c.map((s,N)=>e.jsxDEV("span",{className:"status-info flex items-center space-x-1",children:[e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:234,columnNumber:23},void 0),e.jsxDEV("button",{type:"button",onClick:()=>E(s),className:"hover:text-red-600 transition-colors",children:e.jsxDEV(Y,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:240,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:235,columnNumber:23},void 0)]},N,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:230,columnNumber:21},void 0))},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:228,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("input",{type:"text",id:"tags",value:n,onChange:s=>v(s.target.value),onKeyPress:O,className:"input flex-1",placeholder:"Add a tag and press Enter..."},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:246,columnNumber:19},void 0),e.jsxDEV("button",{type:"button",onClick:f,className:"btn-secondary btn-sm",disabled:!n.trim(),children:"Add Tag"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:255,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:245,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:227,columnNumber:15},void 0),e.jsxDEV("p",{className:"form-help",children:"Tags help organize and find your notes quickly"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:265,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:223,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("div",{className:"form-field-full",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("label",{htmlFor:"content",className:"form-label form-label-required",children:"Content"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:274,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxDEV("span",{className:"flex items-center space-x-1",children:[e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:279,columnNumber:19},void 0),e.jsxDEV("span",{children:[P," words"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:280,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:278,columnNumber:17},void 0),e.jsxDEV("span",{children:[A,"/10,000 characters"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:282,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:277,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:273,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 gap-4",style:{gridTemplateColumns:T?"1fr 1fr":"1fr"},children:[e.jsxDEV("div",{children:[e.jsxDEV("textarea",{id:"content",name:"content",value:a.content,onChange:b,rows:i?20:12,className:`${d.content?"input-error":"input"} resize-none`,placeholder:"Write your note content here... You can use Markdown formatting.","aria-required":"true","aria-invalid":d.content?"true":"false","aria-describedby":d.content?"content-error":"content-help",maxLength:1e4},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:288,columnNumber:17},void 0),d.content?e.jsxDEV("p",{id:"content-error",className:"form-error",children:d.content},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:302,columnNumber:19},void 0):e.jsxDEV("p",{id:"content-help",className:"form-help",children:"Supports basic Markdown formatting (bold, italic, links, etc.)"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:304,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:287,columnNumber:15},void 0),T&&e.jsxDEV("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:312,columnNumber:19},void 0),e.jsxDEV("div",{className:"prose dark:prose-invert max-w-none text-sm",children:a.content?e.jsxDEV("pre",{className:"whitespace-pre-wrap font-sans text-gray-900 dark:text-white",children:a.content},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:315,columnNumber:23},void 0):e.jsxDEV("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Start writing to see preview..."},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:317,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:313,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:311,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:286,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:272,columnNumber:11},void 0),e.jsxDEV("div",{className:"form-actions",children:e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("button",{type:"button",onClick:h,className:"btn-secondary",disabled:l,children:[e.jsxDEV(Y,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:334,columnNumber:17},void 0),"Cancel"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:328,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",disabled:l||!a.title.trim()||!a.content.trim(),className:"btn-primary btn-lg",children:[l&&e.jsxDEV("div",{className:"spinner-sm mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:342,columnNumber:34},void 0),e.jsxDEV(X,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:343,columnNumber:17},void 0),l?"Saving...":k?"Save Changes":"Create Note"]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:337,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:327,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:326,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:183,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:136,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:135,columnNumber:5},void 0)});ee.displayName="EnhancedNoteForm";const re=Q.memo(({note:a,onEdit:k,onDelete:y})=>e.jsxDEV("div",{className:"card dark:bg-gray-800 space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.title},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:364,columnNumber:9},void 0),a.category&&e.jsxDEV("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-primary-600 bg-primary-200 dark:bg-primary-700 dark:text-primary-300 last:mr-0 mr-1",children:a.category},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:366,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:363,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>k(a),className:"p-2 text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors",children:e.jsxDEV(Z,{},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:373,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:372,columnNumber:9},void 0),e.jsxDEV("button",{onClick:()=>y(a._id),className:"p-2 text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",children:e.jsxDEV(le,{},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:376,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:375,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:371,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:362,columnNumber:5},void 0),e.jsxDEV("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:a.content},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:380,columnNumber:5},void 0),e.jsxDEV("div",{className:"text-xs text-gray-400 dark:text-gray-500 pt-2 border-t border-gray-200 dark:border-gray-700",children:["Last updated: ",new Date(a.updatedAt).toLocaleString()]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:381,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:361,columnNumber:3},void 0));re.displayName="NoteCard";function pe(){const[a,k]=o.useState([]),[y,b]=o.useState({title:"",content:"",category:""}),[F,h]=o.useState(!1),[i,V]=o.useState(!1),[d,M]=o.useState(!1),[l,w]=o.useState(null),{user:m}=ie(),j=ke(t=>t.fetchStats),x=o.useCallback(()=>m?`note-draft-${m.id}-${l?._id||"new"}`:"note-draft-guest",[m,l]),D=o.useCallback(xe(t=>{const n=x();localStorage.setItem(n,JSON.stringify(t)),p.dismiss(),p("Draft saved!",{icon:"📝",duration:1500})},3e3),[x]);o.useEffect(()=>{if(i){const t=x(),n=localStorage.getItem(t);b(n?JSON.parse(n):l||{title:"",content:"",category:""})}},[i,l,x]),o.useEffect(()=>(i&&D(y),()=>D.cancel()),[y,i,D]);const P=o.useCallback(async()=>{if(h(!0),!m){k([]),h(!1);return}try{const t=await I.get("/api/notes");k(t.data)}catch(t){p.error("Failed to fetch notes"),console.error("Fetch notes error:",t),k([])}finally{h(!1)}},[m]);o.useEffect(()=>{P()},[P]);const L=o.useCallback(t=>{const{name:n,value:v}=t.target;b(g=>({...g,[n]:v}))},[]),A=o.useCallback(async t=>{if(t.preventDefault(),!m){p.error("You must be logged in to submit a note.");return}h(!0);const n=l?`/api/notes/${l._id}`:"/api/notes",v=l?"put":"post";try{await I[v](n,y),p.success(l?"Note updated successfully":"Note created successfully");const g=x();localStorage.removeItem(g),b({title:"",content:"",category:""}),w(null),V(!1),P(),j()}catch(g){p.error(l?"Failed to update note":"Failed to create note"),console.error("Submit note error:",g)}finally{h(!1)}},[l,y,m,x,P,j]),$=o.useCallback(async t=>{if(!m){p.error("You must be logged in to delete a note.");return}if(window.confirm("Are you sure you want to delete this note?")){h(!0);try{await I.delete(`/api/notes/${t}`),p.success("Note deleted successfully"),P(),j()}catch(n){p.error("Failed to delete note"),console.error("Delete note error:",n)}finally{h(!1)}}},[m,P,j]),T=o.useCallback(t=>{w(t),V(!0)},[]),r=o.useCallback(()=>{if(i){const t=x(),n=localStorage.getItem(t);if(n&&n!==JSON.stringify(l||{title:"",content:"",category:""})&&!window.confirm("You have unsaved changes. Are you sure you want to close? Your draft will be kept."))return}V(!i),w(null),b({title:"",content:"",category:""})},[i,l,x]),c=o.useMemo(()=>a.map(t=>e.jsxDEV(re,{note:t,onEdit:T,onDelete:$},t._id,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:533,columnNumber:5},this)),[a,T,$]);return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Notes"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:544,columnNumber:9},this),e.jsxDEV("button",{onClick:r,className:"btn btn-primary",children:[e.jsxDEV(ce,{className:"-ml-1 mr-2 h-5 w-5"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:549,columnNumber:11},this),e.jsxDEV("span",{children:i?"Close Editor":"Add New Note"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:550,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:545,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:543,columnNumber:7},this),i&&e.jsxDEV(ee,{noteInEditor:y,editingNote:l,isLoading:F,onInputChange:L,onSubmit:A,onCancel:r,isExpanded:d,onToggleExpand:()=>M(!d)},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:555,columnNumber:9},this),F&&!a.length?e.jsxDEV("p",{children:"Loading notes..."},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:568,columnNumber:9},this):e.jsxDEV("div",{className:"grid gap-6 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:c},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:570,columnNumber:9},this),!F&&!a.length&&e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No notes yet"},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:576,columnNumber:11},this),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:'Click "Add New Note" to get started.'},void 0,!1,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:577,columnNumber:11},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:575,columnNumber:9},this)]},void 0,!0,{fileName:"/home/enock/Personal-Productivity-Tracker/tracker/src/pages/Notes.tsx",lineNumber:542,columnNumber:5},this)}export{pe as default};
